class a{constructor(e){this.map=e,this.layerId="weather-segments-layer",this.alternateLayerId="alternate-segments-layer",this.isVisible=!1,this.currentSegments=[],this.currentAlternates=[]}addWeatherSegments(e){!e||!this.map||(this.currentSegments=e.segments||[],this.currentAlternates=e.alternates||[],this.addMainSegments(),this.addAlternateSegments(),this.isVisible=!0)}addMainSegments(){if(!this.currentSegments.length)return;this.removeMainSegments();const e=this.currentSegments.filter(t=>t.geoPoint).map(t=>this.createSegmentFeature(t,"main"));e.length!==0&&(this.map.addSource(this.layerId,{type:"geojson",data:{type:"FeatureCollection",features:e}}),this.map.addLayer({id:this.layerId,type:"circle",source:this.layerId,paint:{"circle-radius":["case",["get","priority"],1,12,2,10,3,8,6],"circle-color":["get","color"],"circle-stroke-width":2,"circle-stroke-color":"#ffffff","circle-opacity":.8}}))}createSegmentFeature(e,t){const r=this.parseGeoPoint(e.geoPoint);return r?{type:"Feature",geometry:{type:"Point",coordinates:r},properties:{airportIcao:e.airportIcao||"Unknown",color:e.color||"#2196F3",priority:e.priority||5,windSpeed:e.windSpeed||0,windDirection:e.windDirection||0,ranking:e.alternateRanking||0,type:t,warnings:e.warnings||"",isRig:e.isRig||!1,araRequired:e.araRequired||!1}}:null}parseGeoPoint(e){if(!e)return null;try{const t=e.split(",");if(t.length===2){const r=parseFloat(t[0].trim()),i=parseFloat(t[1].trim());if(!isNaN(r)&&!isNaN(i))return[i,r]}}catch(t){console.error("WeatherSegmentsLayer: Error parsing geoPoint:",e,t)}return null}addAlternateSegments(){console.log("WeatherSegmentsLayer: Adding alternate segments")}removeMainSegments(){try{this.map.getLayer(this.layerId)&&this.map.removeLayer(this.layerId),this.map.getSource(this.layerId)&&this.map.removeSource(this.layerId)}catch(e){console.error("WeatherSegmentsLayer: Error removing main segments:",e)}}toggle(){this.isVisible=!this.isVisible;const e=this.isVisible?"visible":"none";this.map.getLayer(this.layerId)&&this.map.setLayoutProperty(this.layerId,"visibility",e)}}export{a as default};
