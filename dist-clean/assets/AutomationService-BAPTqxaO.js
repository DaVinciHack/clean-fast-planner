import{c as n,_ as r}from"./index-BN0A5ANK.js";import"./react-vendors-Bh7YcOHL.js";import"./osdk-vendors-CasKN2Wv.js";class c{static async runAutomation(e,t=null){if(!e)throw new Error("Flight ID is required for automation");try{console.log(`AutomationService: Running automation for flight ${e}`),t&&t({type:"step",message:"Starting flight automation...",detail:"Initializing Palantir automation system",progress:0});const i=await this.getSDK();t&&t({type:"step",message:"Connecting to Palantir Foundry",detail:"Establishing secure connection to automation engine",progress:10}),await new Promise(o=>setTimeout(o,1e3)),t&&t({type:"step",message:"Running Palantir Flight Automation",detail:`Processing flight ID: ${e}`,progress:20});const a=await n(i.singleFlightAutomation).applyAction({flightId:e});return t&&t({type:"step",message:"Processing automation results",detail:"Validating and formatting flight data",progress:90}),await new Promise(o=>setTimeout(o,500)),t&&t({type:"completed",message:"Automation completed successfully",detail:"Flight automation finished - preparing to reload flight data",progress:100,result:a}),console.log("Automation successful!",a),a}catch(i){throw console.error("Automation failed:",i),t&&t({type:"error",message:"Automation failed",detail:this.formatErrorMessage(i),progress:0,error:i}),i}}static async getSDK(){try{return await r(()=>import("./osdk-vendors-CasKN2Wv.js").then(e=>e.i),[])}catch(e){throw console.error("Error importing SDK:",e),new Error(`Failed to import SDK: ${e.message}`)}}static formatErrorMessage(e){if(!e)return"Unknown error occurred";const t=e.message||"";return t.includes("401")||t.includes("unauthorized")?"Authentication error: You need to log in again to run automation":t.includes("404")||t.includes("not found")?"API endpoint not found: The automation action may not be available":t.includes("400")||t.includes("Bad Request")?"API request error (400): The server rejected the automation request. The flight might not be in a valid state for automation.":`Error running automation: ${t}`}}export{c as default};
