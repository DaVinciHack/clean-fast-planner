{"version":3,"file":"createFetchHeaderMutator.js","names":["createFetchHeaderMutator","fetchFn","fetch","mutator","url","requestInit","headers","Headers"],"sources":["createFetchHeaderMutator.ts"],"sourcesContent":["/*\n * Copyright 2023 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function createFetchHeaderMutator(\n  fetchFn: typeof fetch | undefined = fetch,\n  mutator: (headers: Headers) => Promise<Headers> | Headers,\n): typeof fetch {\n  return async function headerMutatedFetch(\n    url: RequestInfo | URL,\n    requestInit?: RequestInit,\n  ) {\n    if (!requestInit) {\n      return fetchFn(url, { headers: await mutator(new Headers()) });\n    }\n\n    return fetchFn(url, {\n      ...requestInit,\n      headers: await mutator(new Headers(requestInit.headers)),\n    });\n  };\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASA,wBAAwBA,CACtCC,OAAiC,GAAGC,KAAK,EACzCC,OAAyD,EAC3C;EACd,OAAO,gBACLC,GAAsB,EACtBC,WAAyB,EACzB;IACA,IAAI,CAACA,WAAW,EAAE;MAChB,OAAOJ,OAAO,CAACG,GAAG,EAAE;QAAEE,OAAO,EAAE,MAAMH,OAAO,CAAC,IAAII,OAAO,CAAC,CAAC;MAAE,CAAC,CAAC;IAChE;IAEA,OAAON,OAAO,CAACG,GAAG,EAAE;MAClB,GAAGC,WAAW;MACdC,OAAO,EAAE,MAAMH,OAAO,CAAC,IAAII,OAAO,CAACF,WAAW,CAACC,OAAO,CAAC;IACzD,CAAC,CAAC;EACJ,CAAC;AACH","ignoreList":[]}