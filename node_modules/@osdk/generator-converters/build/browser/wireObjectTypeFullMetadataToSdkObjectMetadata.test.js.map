{"version":3,"file":"wireObjectTypeFullMetadataToSdkObjectMetadata.test.js","names":["describe","expect","expectTypeOf","it","wireObjectTypeFullMetadataToSdkObjectMetadata","result","implementsInterfaces","implementsInterfaces2","linkTypes","objectType","apiName","description","displayName","pluralDisplayName","icon","type","name","color","primaryKey","properties","dataType","otherKey","nullable","rid","defaulted","status","titleProperty","sharedPropertyTypeMapping","toBe","toEqualTypeOf","visibility","toBeUndefined"],"sources":["wireObjectTypeFullMetadataToSdkObjectMetadata.test.ts"],"sourcesContent":["/*\n * Copyright 2024 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { ObjectMetadata } from \"@osdk/api\";\nimport { describe, expect, expectTypeOf, it } from \"vitest\";\nimport type {\n  supportedIconTypes,\n  supportedObjectTypeVisibility,\n  supportedReleaseStatus,\n} from \"./wireObjectTypeFullMetadataToSdkObjectMetadata.js\";\nimport { wireObjectTypeFullMetadataToSdkObjectMetadata } from \"./wireObjectTypeFullMetadataToSdkObjectMetadata.js\";\n\ndescribe(wireObjectTypeFullMetadataToSdkObjectMetadata, () => {\n  it(\"handles magic nullable properties\", () => {\n    const result = wireObjectTypeFullMetadataToSdkObjectMetadata({\n      implementsInterfaces: [],\n      implementsInterfaces2: {},\n      linkTypes: [],\n      objectType: {\n        apiName: \"apiName\",\n        description: \"description\",\n        displayName: \"displayName\",\n        pluralDisplayName: \"displayNames\",\n        icon: { type: \"blueprint\", name: \"blueprint\", color: \"blue\" },\n        primaryKey: \"primaryKey\",\n        properties: {\n          primaryKey: { dataType: { type: \"string\" }, \"rid\": \"rid\" },\n          otherKey: {\n            nullable: false,\n            dataType: { type: \"string\" },\n            rid: \"rid\",\n          },\n          defaulted: { dataType: { type: \"string\" }, rid: \"rid\" },\n        },\n        rid: \"rid\",\n        status: \"ACTIVE\",\n        titleProperty: \"otherKey\",\n      },\n      sharedPropertyTypeMapping: {},\n    }, true);\n\n    // PK is never nullable\n    expect(result.properties[\"primaryKey\"].nullable).toBe(false);\n\n    // was specified above\n    expect(result.properties[\"otherKey\"].nullable).toBe(false);\n\n    // was unspecified, so should be nullable\n    expect(result.properties[\"defaulted\"].nullable).toBe(true);\n  });\n\n  it(\"Is up to date with the enums from API\", () => {\n    type excludedStatuses = \"\";\n    expectTypeOf<\n      Exclude<\n        typeof supportedReleaseStatus[number],\n        excludedStatuses\n      >\n    >()\n      .toEqualTypeOf<\n        NonNullable<ObjectMetadata[\"status\"]>\n      >();\n\n    type excludedVisibility = \"\";\n    expectTypeOf<\n      Exclude<typeof supportedObjectTypeVisibility[number], excludedVisibility>\n    >().toEqualTypeOf<\n      NonNullable<ObjectMetadata[\"visibility\"]>\n    >();\n\n    type excludedIconTypes = \"\";\n    expectTypeOf<\n      Exclude<typeof supportedIconTypes[number], excludedIconTypes>\n    >()\n      .toEqualTypeOf<\n        NonNullable<NonNullable<ObjectMetadata[\"icon\"]>[\"type\"]>\n      >();\n  });\n\n  it(\"does not throw when enums don't match\", () => {\n    const result = wireObjectTypeFullMetadataToSdkObjectMetadata({\n      implementsInterfaces: [],\n      implementsInterfaces2: {},\n      linkTypes: [],\n      objectType: {\n        apiName: \"apiName\",\n        description: \"description\",\n        displayName: \"displayName\",\n        pluralDisplayName: \"displayNames\",\n        icon: {\n          type: \"INVALID_NOT_IN_API\",\n          name: \"blueprint\",\n          color: \"blue\",\n        } as any,\n        primaryKey: \"primaryKey\",\n        properties: {\n          primaryKey: { dataType: { type: \"string\" }, \"rid\": \"rid\" },\n          otherKey: {\n            nullable: false,\n            dataType: { type: \"string\" },\n            rid: \"rid\",\n          },\n          defaulted: { dataType: { type: \"string\" }, rid: \"rid\" },\n        },\n        rid: \"rid\",\n        status: \"INVALID_NOT_IN_API\" as any,\n        visibility: \"INVALID_NOT_IN_API\" as any,\n        titleProperty: \"otherKey\",\n      },\n      sharedPropertyTypeMapping: {},\n    }, true);\n\n    expect(result.status).toBeUndefined();\n    expect(result.visibility).toBeUndefined();\n    expect(result.icon).toBeUndefined();\n  });\n});\n"],"mappings":"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","ignoreList":[]}