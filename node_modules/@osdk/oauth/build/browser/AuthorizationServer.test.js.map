{"version":3,"file":"AuthorizationServer.test.js","names":["describe","expect","it","createAuthorizationServer","authServer","toEqual","token_endpoint","authorization_endpoint","revocation_endpoint","issuer","authServerCustom","authServerCustomWithTrailingSlash"],"sources":["AuthorizationServer.test.ts"],"sourcesContent":["/*\n * Copyright 2024 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { describe, expect, it } from \"vitest\";\n\nimport { createAuthorizationServer } from \"./common.js\";\n\ndescribe(\"Create authorization server\", () => {\n  it(\"works with old multipass ctx path\", () => {\n    const authServer = createAuthorizationServer(\n      \"/multipass\",\n      \"https://stack.palantir.com\",\n    );\n    expect(authServer).toEqual({\n      token_endpoint: \"https://stack.palantir.com/multipass/api/oauth2/token\",\n      authorization_endpoint:\n        \"https://stack.palantir.com/multipass/api/oauth2/authorize\",\n      revocation_endpoint:\n        \"https://stack.palantir.com/multipass/api/oauth2/revoke_token\",\n      issuer: \"https://stack.palantir.com/multipass\",\n    });\n  });\n\n  it(\"works with new multipass ctx path\", () => {\n    const authServer = createAuthorizationServer(\n      \"multipass\",\n      \"https://stack.palantir.com\",\n    );\n    expect(authServer).toEqual({\n      token_endpoint: \"https://stack.palantir.com/multipass/api/oauth2/token\",\n      authorization_endpoint:\n        \"https://stack.palantir.com/multipass/api/oauth2/authorize\",\n      revocation_endpoint:\n        \"https://stack.palantir.com/multipass/api/oauth2/revoke_token\",\n      issuer: \"https://stack.palantir.com/multipass\",\n    });\n\n    const authServerCustom = createAuthorizationServer(\n      \"multipass\",\n      \"https://stack.palantir.com/foo/first/someStuff\",\n    );\n    expect(authServerCustom).toEqual({\n      token_endpoint:\n        \"https://stack.palantir.com/foo/first/someStuff/multipass/api/oauth2/token\",\n      authorization_endpoint:\n        \"https://stack.palantir.com/foo/first/someStuff/multipass/api/oauth2/authorize\",\n      revocation_endpoint:\n        \"https://stack.palantir.com/foo/first/someStuff/multipass/api/oauth2/revoke_token\",\n      issuer: \"https://stack.palantir.com/foo/first/someStuff/multipass\",\n    });\n    const authServerCustomWithTrailingSlash = createAuthorizationServer(\n      \"multipass\",\n      \"https://stack.palantir.com/foo/first/someStuff/\",\n    );\n    expect(authServerCustomWithTrailingSlash).toEqual({\n      token_endpoint:\n        \"https://stack.palantir.com/foo/first/someStuff/multipass/api/oauth2/token\",\n      authorization_endpoint:\n        \"https://stack.palantir.com/foo/first/someStuff/multipass/api/oauth2/authorize\",\n      revocation_endpoint:\n        \"https://stack.palantir.com/foo/first/someStuff/multipass/api/oauth2/revoke_token\",\n      issuer: \"https://stack.palantir.com/foo/first/someStuff/multipass\",\n    });\n  });\n});\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,EAAE,QAAQ,QAAQ;AAE7C,SAASC,yBAAyB,QAAQ,aAAa;AAEvDH,QAAQ,CAAC,6BAA6B,EAAE,MAAM;EAC5CE,EAAE,CAAC,mCAAmC,EAAE,MAAM;IAC5C,MAAME,UAAU,GAAGD,yBAAyB,CAC1C,YAAY,EACZ,4BACF,CAAC;IACDF,MAAM,CAACG,UAAU,CAAC,CAACC,OAAO,CAAC;MACzBC,cAAc,EAAE,uDAAuD;MACvEC,sBAAsB,EACpB,2DAA2D;MAC7DC,mBAAmB,EACjB,8DAA8D;MAChEC,MAAM,EAAE;IACV,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFP,EAAE,CAAC,mCAAmC,EAAE,MAAM;IAC5C,MAAME,UAAU,GAAGD,yBAAyB,CAC1C,WAAW,EACX,4BACF,CAAC;IACDF,MAAM,CAACG,UAAU,CAAC,CAACC,OAAO,CAAC;MACzBC,cAAc,EAAE,uDAAuD;MACvEC,sBAAsB,EACpB,2DAA2D;MAC7DC,mBAAmB,EACjB,8DAA8D;MAChEC,MAAM,EAAE;IACV,CAAC,CAAC;IAEF,MAAMC,gBAAgB,GAAGP,yBAAyB,CAChD,WAAW,EACX,gDACF,CAAC;IACDF,MAAM,CAACS,gBAAgB,CAAC,CAACL,OAAO,CAAC;MAC/BC,cAAc,EACZ,2EAA2E;MAC7EC,sBAAsB,EACpB,+EAA+E;MACjFC,mBAAmB,EACjB,kFAAkF;MACpFC,MAAM,EAAE;IACV,CAAC,CAAC;IACF,MAAME,iCAAiC,GAAGR,yBAAyB,CACjE,WAAW,EACX,iDACF,CAAC;IACDF,MAAM,CAACU,iCAAiC,CAAC,CAACN,OAAO,CAAC;MAChDC,cAAc,EACZ,2EAA2E;MAC7EC,sBAAsB,EACpB,+EAA+E;MACjFC,mBAAmB,EACjB,kFAAkF;MACpFC,MAAM,EAAE;IACV,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}