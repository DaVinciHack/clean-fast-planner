{"version":3,"file":"AggregationsResults.js","names":[],"sources":["AggregationsResults.ts"],"sourcesContent":["/*\n * Copyright 2023 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { ObjectOrInterfaceDefinition } from \"../ontology/ObjectOrInterface.js\";\nimport type {\n  AggregatableKeys,\n  ValidAggregationKeys,\n} from \"./AggregatableKeys.js\";\nimport type { AggregateOpts } from \"./AggregateOpts.js\";\nimport type { AggregationResultsWithGroups } from \"./AggregationResultsWithGroups.js\";\nimport type { AggregationResultsWithoutGroups } from \"./AggregationResultsWithoutGroups.js\";\n\nexport type AggregationsResults<\n  Q extends ObjectOrInterfaceDefinition,\n  AO extends AggregateOpts<Q>,\n> = Exclude<keyof AO[\"$select\"], ValidAggregationKeys<Q>> extends never\n  ? unknown extends AO[\"$groupBy\"] // groupBy is missing\n    ? AggregationResultsWithoutGroups<Q, AO[\"$select\"]>\n  : Exclude<AO[\"$groupBy\"], undefined> extends never // groupBy is explicitly undefined\n    ? AggregationResultsWithoutGroups<Q, AO[\"$select\"]>\n  : Exclude<keyof AO[\"$groupBy\"], AggregatableKeys<Q>> extends never\n    ? AggregationResultsWithGroups<Q, AO[\"$select\"], AO[\"$groupBy\"]>\n  : `Sorry, the following are not valid groups for an aggregation: ${Exclude<\n    keyof AO[\"$groupBy\"] & string,\n    AggregatableKeys<Q>\n  >}`\n  : `Sorry, the following are not valid selectors for an aggregation: ${Exclude<\n    keyof AO[\"$select\"] & string,\n    ValidAggregationKeys<Q>\n  >}`;\n"],"mappings":"","ignoreList":[]}