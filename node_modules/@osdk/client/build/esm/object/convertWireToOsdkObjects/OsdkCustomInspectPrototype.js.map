{"version":3,"file":"OsdkCustomInspectPrototype.js","names":["InterfaceDefRef","ObjectDefRef","UnderlyingOsdkObject","nodejsUtilInspectCustom","Symbol","for","OsdkCustomInspectPrototype","Object","create","value","customInspect","_depth","options","localInspect","newOptions","depth","ret","stylize","apiName","k","Set","Reflect","ownKeys","toString","replace"],"sources":["OsdkCustomInspectPrototype.ts"],"sourcesContent":["/*\n * Copyright 2024 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { ObjectOrInterfaceDefinition, Osdk } from \"@osdk/api\";\nimport type { inspect, InspectOptionsStylized } from \"node:util\";\nimport type { HolderBase } from \"./InternalSymbols.js\";\nimport {\n  InterfaceDefRef,\n  ObjectDefRef,\n  UnderlyingOsdkObject,\n} from \"./InternalSymbols.js\";\n\nconst nodejsUtilInspectCustom: unique symbol = Symbol.for(\n  \"nodejs.util.inspect.custom\",\n);\n\nexport const OsdkCustomInspectPrototype: {\n  [nodejsUtilInspectCustom]: typeof customInspect;\n} = Object.create(null, {\n  [nodejsUtilInspectCustom]: { value: customInspect },\n});\n\n/**\n * A custom `util.inspect`/`console.log` for nodejs. Not emitted in the browser version\n * @param this\n * @param _depth\n * @param options\n * @param inspect\n * @returns\n */\nfunction customInspect(\n  this:\n    & HolderBase<ObjectOrInterfaceDefinition>\n    & Osdk<any>,\n  _depth: number,\n  options: InspectOptionsStylized,\n  localInspect: typeof inspect,\n): string {\n  const newOptions = {\n    ...options,\n    depth: options.depth == null ? null : options.depth - 1,\n  };\n\n  let ret = `Osdk<${\n    options.stylize(\n      this[ObjectDefRef]?.apiName ?? this[InterfaceDefRef]?.apiName ?? \"\",\n      \"special\",\n    )\n  }> {\\n`;\n\n  for (\n    const k of new Set([\n      \"$apiName\",\n      \"$objectType\",\n      \"$primaryKey\",\n      ...Reflect.ownKeys(this),\n    ])\n  ) {\n    if (typeof k === \"symbol\") continue;\n    ret += `  ${options.stylize(k.toString(), \"undefined\")}: ${\n      localInspect(this[k as any], newOptions)\n    }\\n`;\n  }\n\n  if (this[UnderlyingOsdkObject] !== this) {\n    ret += \"\\n\";\n    ret += `  ${options.stylize(\"$as\", \"special\")}: ${\n      localInspect(this[UnderlyingOsdkObject], newOptions).replace(\n        /\\n/g,\n        `\\n  `,\n      )\n    }`;\n    ret += \"\\n\";\n  }\n\n  ret += \"}\";\n  return ret;\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKA,SACEA,eAAe,EACfC,YAAY,EACZC,oBAAoB,QACf,sBAAsB;AAE7B,MAAMC,uBAAsC,GAAGC,MAAM,CAACC,GAAG,CACvD,4BACF,CAAC;AAED,OAAO,MAAMC,0BAEZ,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,EAAE;EACtB,CAACL,uBAAuB,GAAG;IAAEM,KAAK,EAAEC;EAAc;AACpD,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,aAAaA,CAIpBC,MAAc,EACdC,OAA+B,EAC/BC,YAA4B,EACpB;EACR,MAAMC,UAAU,GAAG;IACjB,GAAGF,OAAO;IACVG,KAAK,EAAEH,OAAO,CAACG,KAAK,IAAI,IAAI,GAAG,IAAI,GAAGH,OAAO,CAACG,KAAK,GAAG;EACxD,CAAC;EAED,IAAIC,GAAG,GAAG,QACRJ,OAAO,CAACK,OAAO,CACb,IAAI,CAAChB,YAAY,CAAC,EAAEiB,OAAO,IAAI,IAAI,CAAClB,eAAe,CAAC,EAAEkB,OAAO,IAAI,EAAE,EACnE,SACF,CAAC,OACI;EAEP,KACE,MAAMC,CAAC,IAAI,IAAIC,GAAG,CAAC,CACjB,UAAU,EACV,aAAa,EACb,aAAa,EACb,GAAGC,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC,CACzB,CAAC,EACF;IACA,IAAI,OAAOH,CAAC,KAAK,QAAQ,EAAE;IAC3BH,GAAG,IAAI,KAAKJ,OAAO,CAACK,OAAO,CAACE,CAAC,CAACI,QAAQ,CAAC,CAAC,EAAE,WAAW,CAAC,KACpDV,YAAY,CAAC,IAAI,CAACM,CAAC,CAAQ,EAAEL,UAAU,CAAC,IACtC;EACN;EAEA,IAAI,IAAI,CAACZ,oBAAoB,CAAC,KAAK,IAAI,EAAE;IACvCc,GAAG,IAAI,IAAI;IACXA,GAAG,IAAI,KAAKJ,OAAO,CAACK,OAAO,CAAC,KAAK,EAAE,SAAS,CAAC,KAC3CJ,YAAY,CAAC,IAAI,CAACX,oBAAoB,CAAC,EAAEY,UAAU,CAAC,CAACU,OAAO,CAC1D,KAAK,EACL,MACF,CAAC,EACD;IACFR,GAAG,IAAI,IAAI;EACb;EAEAA,GAAG,IAAI,GAAG;EACV,OAAOA,GAAG;AACZ","ignoreList":[]}