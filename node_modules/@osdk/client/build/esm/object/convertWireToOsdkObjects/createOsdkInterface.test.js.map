{"version":3,"file":"createOsdkInterface.test.js","names":["describe","expect","it","InterfaceDefinitions","createOsdkInterface","ObjectDefRef","underlying","apiName","displayName","interfaceMap","inverseInterfaceMap","links","pluralDisplayName","primaryKeyApiName","primaryKeyType","properties","type","titleProperty","rid","status","icon","undefined","visibility","description","iface","implements","Object","keys","toMatchInlineSnapshot","asdf","toBe","JSON","stringify"],"sources":["createOsdkInterface.test.ts"],"sourcesContent":["/*\n * Copyright 2024 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { describe, expect, it } from \"vitest\";\nimport {\n  type FetchedObjectTypeDefinition,\n  InterfaceDefinitions,\n} from \"../../ontology/OntologyProvider.js\";\nimport { createOsdkInterface } from \"./createOsdkInterface.js\";\nimport { ObjectDefRef } from \"./InternalSymbols.js\";\n\ndescribe(createOsdkInterface, () => {\n  it(\"works in the normal case\", () => {\n    const underlying = {\n      \"foo\": \"hi mom\",\n\n      [ObjectDefRef]: {\n        [InterfaceDefinitions]: {},\n        apiName: \"Obj\",\n        displayName: \"\",\n        interfaceMap: {\n          \"IFoo\": {\n            \"asdf\": \"foo\",\n          },\n        },\n        inverseInterfaceMap: {},\n        links: {},\n        pluralDisplayName: \"\",\n        primaryKeyApiName: \"\",\n        primaryKeyType: \"string\",\n        properties: {\n          \"foo\": {\n            type: \"string\",\n          },\n        },\n        type: \"object\",\n        titleProperty: \"foo\",\n        rid: \"\",\n        status: \"ACTIVE\",\n        icon: undefined,\n        visibility: undefined,\n        description: undefined,\n      } satisfies FetchedObjectTypeDefinition,\n    };\n\n    const iface = createOsdkInterface(underlying as any, {\n      \"apiName\": \"IFoo\",\n      displayName: \"\",\n      links: {},\n      properties: {\n        \"asdf\": {\n          type: \"string\",\n        },\n      },\n      rid: \"\",\n      type: \"interface\",\n      implements: [],\n      description: undefined,\n    });\n\n    expect(Object.keys(iface)).toMatchInlineSnapshot(`\n      [\n        \"$apiName\",\n        \"asdf\",\n      ]\n    `);\n\n    expect((iface as any).asdf).toBe(\"hi mom\");\n\n    expect(JSON.stringify(iface, undefined, 2)).toMatchInlineSnapshot(`\n      \"{\n        \"$apiName\": \"IFoo\",\n        \"asdf\": \"hi mom\"\n      }\"\n    `);\n  });\n\n  it(\"properly maps apiNamespace\", () => {\n    const underlying = {\n      \"foo\": \"hi mom\",\n\n      [ObjectDefRef]: {\n        [InterfaceDefinitions]: {},\n        apiName: \"Obj\",\n        displayName: \"\",\n        interfaceMap: {\n          \"a.IFoo\": {\n            \"a.asdf\": \"foo\",\n          },\n        },\n        inverseInterfaceMap: {},\n        links: {},\n        pluralDisplayName: \"\",\n        primaryKeyApiName: \"\",\n        primaryKeyType: \"string\",\n        properties: {\n          \"foo\": {\n            type: \"string\",\n          },\n        },\n        type: \"object\",\n        titleProperty: \"foo\",\n        rid: \"\",\n        status: \"ACTIVE\",\n        icon: undefined,\n        visibility: undefined,\n        description: undefined,\n      } satisfies FetchedObjectTypeDefinition,\n    };\n\n    const iface = createOsdkInterface(underlying as any, {\n      \"apiName\": \"a.IFoo\",\n      displayName: \"\",\n      links: {},\n      properties: {\n        \"a.asdf\": {\n          type: \"string\",\n        },\n      },\n      rid: \"\",\n      type: \"interface\",\n      implements: [],\n      description: undefined,\n    });\n\n    expect(Object.keys(iface)).toMatchInlineSnapshot(`\n      [\n        \"$apiName\",\n        \"asdf\",\n      ]\n    `);\n\n    expect((iface as any).asdf).toBe(\"hi mom\");\n\n    expect(JSON.stringify(iface, undefined, 2)).toMatchInlineSnapshot(`\n      \"{\n        \"$apiName\": \"a.IFoo\",\n        \"asdf\": \"hi mom\"\n      }\"\n    `);\n  });\n\n  it(\"works with mixed namespaces\", () => {\n    const underlying = {\n      \"foo\": \"hi mom\",\n\n      [ObjectDefRef]: {\n        [InterfaceDefinitions]: {},\n        apiName: \"Obj\",\n        displayName: \"\",\n        interfaceMap: {\n          \"a.IFoo\": {\n            \"b.asdf\": \"foo\",\n          },\n        },\n        inverseInterfaceMap: {},\n        links: {},\n        pluralDisplayName: \"\",\n        primaryKeyApiName: \"\",\n        primaryKeyType: \"string\",\n        properties: {\n          \"foo\": {\n            type: \"string\",\n          },\n        },\n        type: \"object\",\n        titleProperty: \"foo\",\n        rid: \"\",\n        status: \"ACTIVE\",\n        icon: undefined,\n        visibility: undefined,\n        description: undefined,\n      } satisfies FetchedObjectTypeDefinition,\n    };\n\n    const iface = createOsdkInterface(underlying as any, {\n      \"apiName\": \"a.IFoo\",\n      displayName: \"\",\n      links: {},\n      properties: {\n        \"b.asdf\": {\n          type: \"string\",\n        },\n      },\n      rid: \"\",\n      type: \"interface\",\n      implements: [],\n      description: undefined,\n    });\n\n    expect(Object.keys(iface)).toMatchInlineSnapshot(`\n      [\n        \"$apiName\",\n        \"b.asdf\",\n      ]\n    `);\n\n    expect((iface as any)[\"b.asdf\"]).toBe(\"hi mom\");\n\n    expect(JSON.stringify(iface, undefined, 2)).toMatchInlineSnapshot(`\n      \"{\n        \"$apiName\": \"a.IFoo\",\n        \"b.asdf\": \"hi mom\"\n      }\"\n    `);\n  });\n});\n"],"mappings":"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","ignoreList":[]}