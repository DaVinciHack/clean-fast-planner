{"version":3,"file":"datetimeConverters.test.js","names":["register","unregister","afterAll","beforeAll","describe","expect","it","extractDate","extractDateInLocalTime","extractDateInUTC","generateOffsetUtcString","toThrowError","result","toBe","date","Date","getDate","getUTCDate"],"sources":["datetimeConverters.test.ts"],"sourcesContent":["/*\n * Copyright 2023 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { register, unregister } from \"timezone-mock\";\nimport { afterAll, beforeAll, describe, expect, it } from \"vitest\";\nimport {\n  extractDate,\n  extractDateInLocalTime,\n  extractDateInUTC,\n  generateOffsetUtcString,\n} from \"./datetimeConverters.js\";\n\ndescribe(\"test datetime converters\", () => {\n  beforeAll(() => {\n    register(\"Etc/GMT+5\");\n  });\n\n  afterAll(() => {\n    unregister();\n  });\n\n  describe(\"test extractDate\", () => {\n    it(\"should error if the date is not in UTC format\", () => {\n      expect(() => extractDate(\"2021-01-01\")).toThrowError(\n        \"Invariant failed: Invalid date format. Expected ISO 8601 format, but received 2021-01-01\",\n      );\n      expect(() => extractDate(\"2021-01-01T00:0000.000Z\")).toThrowError(\n        \"Invariant failed: Invalid date format. Expected ISO 8601 format, but received 2021-01-01\",\n      );\n    });\n\n    it(\"should return the date part of the input string\", () => {\n      const result = extractDate(\"2021-01-01T00:00:00.000Z\");\n      expect(result).toBe(\"2021-01-01\");\n    });\n  });\n\n  describe(\"test extractDateInUTC\", () => {\n    it(\"should return the date in UTC given Date constructed with UTC time\", () => {\n      const date = new Date(\"2021-01-01T00:00:00.000Z\");\n      expect(date.getDate()).toBe(31);\n      expect(date.getUTCDate()).toBe(1);\n      const result = extractDateInUTC(date);\n      expect(result).toBe(\"2021-01-01\");\n    });\n\n    it(\"should return the date in UTC given Date constructed with a local time\", () => {\n      const date = new Date(\"2020-12-31T23:00:00.000\");\n      expect(date.getDate()).toBe(31);\n      expect(date.getUTCDate()).toBe(1);\n      const result = extractDateInUTC(date);\n      expect(result).toBe(\"2021-01-01\");\n    });\n  });\n\n  describe(\"test extractDateInLocalTime\", () => {\n    it(\"should return the date in local time given Date constructed with local time\", () => {\n      const date = new Date(\"2020-12-31T23:00:00.000\");\n      expect(date.getDate()).toBe(31);\n      const result = extractDateInLocalTime(date);\n      expect(result).toBe(\"2020-12-31\");\n    });\n\n    describe(\"test generating ISO String\", () => {\n      it(\"should return a correct ISO 8601 string that is offset correctly\", () => {\n        const date = new Date(\"2021-01-01T00:00:00.000Z\");\n        expect(date.getDate()).toBe(31);\n\n        const result = generateOffsetUtcString(date);\n        expect(result).toBe(\"2020-12-31T19:00:00.000Z\");\n      });\n    });\n\n    it(\"should return the date in local time given Date constructed with UTC time\", () => {\n      const date = new Date(\"2021-01-01T00:00:00.000Z\");\n      expect(date.getDate()).toBe(31);\n      const result = extractDateInLocalTime(date);\n      expect(result).toBe(\"2020-12-31\");\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}