{"version":3,"file":"BaseLogger.js","names":["noop","levels","trace","debug","info","warn","error","fatal","BaseLogger","factory","constructor","bindings","options","k","level","isLevelEnabled","createLogMethod","child","msgPrefix","filter","x","join","ourLevel"],"sources":["BaseLogger.ts"],"sourcesContent":["/*\n * Copyright 2025 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { Logger } from \"@osdk/api\";\n\nexport function noop(): any {\n}\n\ninterface LoggerConstructor {\n  new(\n    bindings: Record<string, any>,\n    options?: { level?: string; msgPrefix?: string },\n  ): Logger;\n}\n\nconst levels = {\n  trace: 10,\n  debug: 20,\n  info: 30,\n  warn: 40,\n  error: 50,\n  fatal: 60,\n};\n\nexport abstract class BaseLogger implements Logger {\n  protected bindings: Record<string, any>;\n  protected options: { level?: string; msgPrefix?: string } | undefined;\n  #factory: LoggerConstructor;\n\n  constructor(\n    bindings: Record<string, any>,\n    options: { level?: string; msgPrefix?: string } = {},\n    factory: LoggerConstructor,\n  ) {\n    this.bindings = bindings;\n    this.options = options;\n    this.#factory = factory;\n\n    for (\n      const k of [\"trace\", \"debug\", \"info\", \"warn\", \"error\", \"fatal\"] as const\n    ) {\n      if (this.options?.level && !this.isLevelEnabled(k)) {\n        continue;\n      }\n      this[k] = this.createLogMethod(k, bindings);\n    }\n  }\n\n  protected abstract createLogMethod(\n    name: \"trace\" | \"debug\" | \"info\" | \"warn\" | \"error\" | \"fatal\",\n    bindings: Record<string, any>,\n  ): Logger.LogFn;\n\n  trace: Logger.LogFn = noop;\n  debug: Logger.LogFn = noop;\n  warn: Logger.LogFn = noop;\n  info: Logger.LogFn = noop;\n  error: Logger.LogFn = noop;\n  fatal: Logger.LogFn = noop;\n\n  child(\n    bindings: Record<string, any>,\n    options?: { level?: string; msgPrefix?: string },\n  ): Logger {\n    return new this.#factory({\n      ...this.bindings,\n      ...bindings,\n    }, {\n      level: (options ?? this.options)?.level,\n      msgPrefix: [this.options?.msgPrefix, options?.msgPrefix].filter(x => x)\n        .join(\" \"),\n    });\n  }\n\n  isLevelEnabled(level: string): boolean {\n    const ourLevel = (this.options?.level ?? \"info\") as keyof typeof levels;\n\n    return level in levels && ourLevel in levels\n      && levels[level as keyof typeof levels] >= levels[ourLevel];\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA,OAAO,SAASA,IAAIA,CAAA,EAAQ,CAC5B;AASA,MAAMC,MAAM,GAAG;EACbC,KAAK,EAAE,EAAE;EACTC,KAAK,EAAE,EAAE;EACTC,IAAI,EAAE,EAAE;EACRC,IAAI,EAAE,EAAE;EACRC,KAAK,EAAE,EAAE;EACTC,KAAK,EAAE;AACT,CAAC;AAED,OAAO,MAAeC,UAAU,CAAmB;EAGjD,CAACC,OAAO;EAERC,WAAWA,CACTC,QAA6B,EAC7BC,OAA+C,GAAG,CAAC,CAAC,EACpDH,OAA0B,EAC1B;IACA,IAAI,CAACE,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAAC,CAACH,OAAO,GAAGA,OAAO;IAEvB,KACE,MAAMI,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,EAC/D;MACA,IAAI,IAAI,CAACD,OAAO,EAAEE,KAAK,IAAI,CAAC,IAAI,CAACC,cAAc,CAACF,CAAC,CAAC,EAAE;QAClD;MACF;MACA,IAAI,CAACA,CAAC,CAAC,GAAG,IAAI,CAACG,eAAe,CAACH,CAAC,EAAEF,QAAQ,CAAC;IAC7C;EACF;EAOAT,KAAK,GAAiBF,IAAI;EAC1BG,KAAK,GAAiBH,IAAI;EAC1BK,IAAI,GAAiBL,IAAI;EACzBI,IAAI,GAAiBJ,IAAI;EACzBM,KAAK,GAAiBN,IAAI;EAC1BO,KAAK,GAAiBP,IAAI;EAE1BiB,KAAKA,CACHN,QAA6B,EAC7BC,OAAgD,EACxC;IACR,OAAO,IAAI,IAAI,CAAC,CAACH,OAAO,CAAC;MACvB,GAAG,IAAI,CAACE,QAAQ;MAChB,GAAGA;IACL,CAAC,EAAE;MACDG,KAAK,EAAE,CAACF,OAAO,IAAI,IAAI,CAACA,OAAO,GAAGE,KAAK;MACvCI,SAAS,EAAE,CAAC,IAAI,CAACN,OAAO,EAAEM,SAAS,EAAEN,OAAO,EAAEM,SAAS,CAAC,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAAC,CACpEC,IAAI,CAAC,GAAG;IACb,CAAC,CAAC;EACJ;EAEAN,cAAcA,CAACD,KAAa,EAAW;IACrC,MAAMQ,QAAQ,GAAI,IAAI,CAACV,OAAO,EAAEE,KAAK,IAAI,MAA8B;IAEvE,OAAOA,KAAK,IAAIb,MAAM,IAAIqB,QAAQ,IAAIrB,MAAM,IACvCA,MAAM,CAACa,KAAK,CAAwB,IAAIb,MAAM,CAACqB,QAAQ,CAAC;EAC/D;AACF","ignoreList":[]}